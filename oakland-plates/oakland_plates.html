
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Oakland license plates &#8212; Lesson at LIS</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script >let toggleHintShow = 'Click to show';</script>
    <script >let toggleHintHide = 'Click to hide';</script>
    <script >let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script >const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Cleaning the automatic license plate reader data" href="clean_plates.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Lesson at LIS</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Privacy and transparency
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="background.html">
   Background
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="clean_plates.html">
   Cleaning the automatic license plate reader data
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Oakland license plates
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/matthew-brett/lis-lesson/main?urlpath=tree/oakland-plates/oakland_plates.Rmd"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        <a href="https://lishub.odsti.org/hub/user-redirect/git-pull?repo=https%3A//github.com/matthew-brett/lis-lesson&urlpath=tree/lis-lesson/oakland-plates/oakland_plates.Rmd&branch=main"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on JupyterHub"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_jupyterhub.svg">
  </span>
<span class="headerbtn__text-container">JupyterHub</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/matthew-brett/lis-lesson"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/matthew-brett/lis-lesson/issues/new?title=Issue%20on%20page%20%2Foakland-plates/oakland_plates.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/oakland-plates/oakland_plates.Rmd"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.Rmd</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-data">
   The data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#searching-for-individuals">
   Searching for Individuals
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#poking-around">
   Poking around
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#so-who-should-see-these-data">
   So … who should see these data?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#notes">
   Notes
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Oakland license plates</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-data">
   The data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#searching-for-individuals">
   Searching for Individuals
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#poking-around">
   Poking around
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#so-who-should-see-these-data">
   So … who should see these data?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#notes">
   Notes
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="oakland-license-plates">
<h1>Oakland license plates<a class="headerlink" href="#oakland-license-plates" title="Permalink to this headline">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The array library.</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="c1"># Data frame library.</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="c1"># Library for plotting maps.</span>
<span class="kn">import</span> <span class="nn">folium</span>
</pre></div>
</div>
</div>
</div>
<p>See <a class="reference internal" href="background.html"><span class="doc std std-doc">background</span></a> for the background to this notebook.</p>
<p>We’re going to look at some data collected by the Oakland
Police Department. They have automated license plate readers on
their police cars, and they’ve built up a database of license
plates that they’ve seen — and where and when they saw each one.</p>
<div class="section" id="the-data">
<h2>The data<a class="headerlink" href="#the-data" title="Permalink to this headline">#</a></h2>
<p>We load the cleaned license plate data from the file we saved earlier.</p>
<p>Notice that we are telling Pandas that the <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> column has a date/time
values. Otherwise, Pandas will load these values as strings.  We could have
done that, and converted them later, but loading them this way saves some time.</p>
<p>Make sure you have run the <a class="reference internal" href="clean_plates.html"><span class="doc std std-doc">data preparation notebook</span></a> before
you run the cell below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load all license plate data.</span>
<span class="c1"># This will probably take about 30 seconds, depending on your machine.</span>
<span class="n">lprs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;all_lprs.csv&#39;</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Timestamp&#39;</span><span class="p">])</span>
<span class="n">lprs</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Plate</th>
      <th>Timestamp</th>
      <th>Latitude</th>
      <th>Longitude</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>6HVB598</td>
      <td>2012-11-20 13:34:00</td>
      <td>37.687040</td>
      <td>-122.134973</td>
    </tr>
    <tr>
      <th>1</th>
      <td>5WVD836</td>
      <td>2012-11-20 13:34:00</td>
      <td>37.687030</td>
      <td>-122.134973</td>
    </tr>
    <tr>
      <th>2</th>
      <td>6B57142</td>
      <td>2012-11-20 13:34:00</td>
      <td>37.686998</td>
      <td>-122.134975</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4FSH999</td>
      <td>2012-11-20 13:34:00</td>
      <td>37.795501</td>
      <td>-122.206155</td>
    </tr>
    <tr>
      <th>4</th>
      <td>6B57142</td>
      <td>2012-11-20 13:34:00</td>
      <td>37.686898</td>
      <td>-122.135020</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2739682</th>
      <td>681XDA</td>
      <td>2012-08-06 18:07:00</td>
      <td>37.776971</td>
      <td>-122.181773</td>
    </tr>
    <tr>
      <th>2739683</th>
      <td>3WBW276</td>
      <td>2012-08-06 18:07:00</td>
      <td>37.828705</td>
      <td>-122.255816</td>
    </tr>
    <tr>
      <th>2739684</th>
      <td>6TLG975</td>
      <td>2012-08-06 18:07:00</td>
      <td>37.777116</td>
      <td>-122.182036</td>
    </tr>
    <tr>
      <th>2739685</th>
      <td>6ULK403</td>
      <td>2012-08-06 18:07:00</td>
      <td>37.828706</td>
      <td>-122.255816</td>
    </tr>
    <tr>
      <th>2739686</th>
      <td>5WYX367</td>
      <td>2012-08-06 18:07:00</td>
      <td>37.777245</td>
      <td>-122.182246</td>
    </tr>
  </tbody>
</table>
<p>2739687 rows × 4 columns</p>
</div></div></div>
</div>
<p><strong>Note</strong> If you get a <code class="docutils literal notranslate"><span class="pre">FileNotFound</span></code> error, check you have run the <a class="reference internal" href="clean_plates.html"><span class="doc std std-doc">data
preparation
notebook</span></a>.
It writes out the data file that the you are reading above.</p>
<p>Notice that we have about 2.7 million license plate reads.</p>
<p>Let’s start by seeing what can be learned about someone, using this data —
assuming you know their license plate</p>
</div>
<div class="section" id="searching-for-individuals">
<h2>Searching for Individuals<a class="headerlink" href="#searching-for-individuals" title="Permalink to this headline">#</a></h2>
<p>As a warmup, we’ll take a look at ex-Mayor <a class="reference external" href="https://en.wikipedia.org/wiki/Jean_Quan">Jean
Quan</a>’s car, and where it has been
seen.  Her license plate number is 6FCH845. (How did I learn that?  Turns out
she was in the news for getting $1000 of parking tickets, and <a class="reference external" href="http://www.sfgate.com/bayarea/matier-ross/article/Jean-Quan-Oakland-s-new-mayor-gets-car-booted-3164530.php">the news
article</a>
included a picture of her car, with the license plate visible. You’d be amazed
by what’s out there on the Internet…)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">jean_quan</span> <span class="o">=</span> <span class="n">lprs</span><span class="p">[</span><span class="n">lprs</span><span class="p">[</span><span class="s1">&#39;Plate&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;6FCH845&#39;</span><span class="p">]</span>
<span class="n">jean_quan</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Plate</th>
      <th>Timestamp</th>
      <th>Latitude</th>
      <th>Longitude</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>201089</th>
      <td>6FCH845</td>
      <td>2012-11-01 09:04:00</td>
      <td>37.798710</td>
      <td>-122.276221</td>
    </tr>
    <tr>
      <th>269347</th>
      <td>6FCH845</td>
      <td>2012-10-24 11:15:00</td>
      <td>37.799695</td>
      <td>-122.274868</td>
    </tr>
    <tr>
      <th>269571</th>
      <td>6FCH845</td>
      <td>2012-10-24 11:01:00</td>
      <td>37.799693</td>
      <td>-122.274806</td>
    </tr>
    <tr>
      <th>269684</th>
      <td>6FCH845</td>
      <td>2012-10-24 10:20:00</td>
      <td>37.799735</td>
      <td>-122.274893</td>
    </tr>
    <tr>
      <th>1162062</th>
      <td>6FCH845</td>
      <td>2013-12-31 10:09:00</td>
      <td>37.807556</td>
      <td>-122.278485</td>
    </tr>
    <tr>
      <th>2490338</th>
      <td>6FCH845</td>
      <td>2014-05-08 19:30:00</td>
      <td>37.797558</td>
      <td>-122.269350</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>OK, so her car shows up 6 times in this data set.  Let’s put those on a map, to
see if we can learn anything from these reads.</p>
<p>For background, we will also put a marker on the Oakland Police Department and
the Oakland City Hall:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">OAK_PD_COORDS</span> <span class="o">=</span> <span class="p">(</span><span class="mf">37.79926910804871</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.27497697421084</span><span class="p">)</span>
<span class="n">OAK_CITY_HALL_COORDS</span> <span class="o">=</span> <span class="p">(</span><span class="mf">37.805498393033204</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.2725551318817</span><span class="p">)</span>

<span class="c1"># Map of Oakland, centered on the Police Department</span>
<span class="n">oak_map</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">OAK_PD_COORDS</span><span class="p">,</span>
                     <span class="n">tiles</span><span class="o">=</span><span class="s1">&#39;OpenStreetMap&#39;</span><span class="p">,</span>
                     <span class="n">zoom_start</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="c1"># Jean Quan&#39;s reads.</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">jean_quan</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
        <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;Latitude&#39;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Longitude&#39;</span><span class="p">]],</span>
        <span class="n">popup</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;Timestamp&#39;</span><span class="p">],</span>
        <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">icon</span><span class="o">=</span><span class="s1">&#39;car&#39;</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;fa&#39;</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">oak_map</span><span class="p">)</span>

<span class="c1"># Police Department</span>
<span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">OAK_PD_COORDS</span><span class="p">,</span>
              <span class="n">popup</span><span class="o">=</span><span class="s1">&#39;Police Dept&#39;</span><span class="p">,</span>
              <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;lightgray&#39;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;info-sign&#39;</span><span class="p">)</span>
             <span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">oak_map</span><span class="p">)</span>


<span class="c1"># City Hall</span>
<span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">OAK_CITY_HALL_COORDS</span><span class="p">,</span>
              <span class="n">popup</span><span class="o">=</span><span class="s1">&#39;City Hall&#39;</span><span class="p">,</span>
              <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;lightgray&#39;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;info-sign&#39;</span><span class="p">)</span>
             <span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">oak_map</span><span class="p">)</span>

<span class="c1"># Show the map</span>
<span class="n">oak_map</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe src="about:blank" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" data-html=PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgCiAgICAgICAgPHNjcmlwdD4KICAgICAgICAgICAgTF9OT19UT1VDSCA9IGZhbHNlOwogICAgICAgICAgICBMX0RJU0FCTEVfM0QgPSBmYWxzZTsKICAgICAgICA8L3NjcmlwdD4KICAgIAogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbGVhZmxldEAxLjYuMC9kaXN0L2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0xLjEyLjQubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5qcyI+PC9zY3JpcHQ+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbGVhZmxldEAxLjYuMC9kaXN0L2xlYWZsZXQuY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vYm9vdHN0cmFwLzMuMi4wL2Nzcy9ib290c3RyYXAubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9mb250LWF3ZXNvbWUvNC42LjMvY3NzL2ZvbnQtYXdlc29tZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL0xlYWZsZXQuYXdlc29tZS1tYXJrZXJzLzIuMC4yL2xlYWZsZXQuYXdlc29tZS1tYXJrZXJzLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhd2Nkbi5naXRoYWNrLmNvbS9weXRob24tdmlzdWFsaXphdGlvbi9mb2xpdW0vbWFzdGVyL2ZvbGl1bS90ZW1wbGF0ZXMvbGVhZmxldC5hd2Vzb21lLnJvdGF0ZS5jc3MiLz4KICAgIDxzdHlsZT5odG1sLCBib2R5IHt3aWR0aDogMTAwJTtoZWlnaHQ6IDEwMCU7bWFyZ2luOiAwO3BhZGRpbmc6IDA7fTwvc3R5bGU+CiAgICA8c3R5bGU+I21hcCB7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7Ym90dG9tOjA7cmlnaHQ6MDtsZWZ0OjA7fTwvc3R5bGU+CiAgICAKICAgICAgICAgICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwKICAgICAgICAgICAgICAgIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyIgLz4KICAgICAgICAgICAgPHN0eWxlPgogICAgICAgICAgICAgICAgI21hcF8xMjcwM2NiNjhjZjI0MDU3YWMzNzM3MTZjNDBjZTFhNyB7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAuMCU7CiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgICAgICB0b3A6IDAuMCU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgCjwvaGVhZD4KPGJvZHk+ICAgIAogICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvbGl1bS1tYXAiIGlkPSJtYXBfMTI3MDNjYjY4Y2YyNDA1N2FjMzczNzE2YzQwY2UxYTciID48L2Rpdj4KICAgICAgICAKPC9ib2R5Pgo8c2NyaXB0PiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFwXzEyNzAzY2I2OGNmMjQwNTdhYzM3MzcxNmM0MGNlMWE3ID0gTC5tYXAoCiAgICAgICAgICAgICAgICAibWFwXzEyNzAzY2I2OGNmMjQwNTdhYzM3MzcxNmM0MGNlMWE3IiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IFszNy43OTkyNjkxMDgwNDg3MSwgLTEyMi4yNzQ5NzY5NzQyMTA4NF0sCiAgICAgICAgICAgICAgICAgICAgY3JzOiBMLkNSUy5FUFNHMzg1NywKICAgICAgICAgICAgICAgICAgICB6b29tOiAxNSwKICAgICAgICAgICAgICAgICAgICB6b29tQ29udHJvbDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBwcmVmZXJDYW52YXM6IGZhbHNlLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwoKICAgICAgICAgICAgCgogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciB0aWxlX2xheWVyX2RiZWJkN2M4ZWRlNjRmZjhiNzI0NTJjNjVjODYyMTJhID0gTC50aWxlTGF5ZXIoCiAgICAgICAgICAgICAgICAiaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmciLAogICAgICAgICAgICAgICAgeyJhdHRyaWJ1dGlvbiI6ICJEYXRhIGJ5IFx1MDAyNmNvcHk7IFx1MDAzY2EgaHJlZj1cImh0dHA6Ly9vcGVuc3RyZWV0bWFwLm9yZ1wiXHUwMDNlT3BlblN0cmVldE1hcFx1MDAzYy9hXHUwMDNlLCB1bmRlciBcdTAwM2NhIGhyZWY9XCJodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodFwiXHUwMDNlT0RiTFx1MDAzYy9hXHUwMDNlLiIsICJkZXRlY3RSZXRpbmEiOiBmYWxzZSwgIm1heE5hdGl2ZVpvb20iOiAxOCwgIm1heFpvb20iOiAxOCwgIm1pblpvb20iOiAwLCAibm9XcmFwIjogZmFsc2UsICJvcGFjaXR5IjogMSwgInN1YmRvbWFpbnMiOiAiYWJjIiwgInRtcyI6IGZhbHNlfQogICAgICAgICAgICApLmFkZFRvKG1hcF8xMjcwM2NiNjhjZjI0MDU3YWMzNzM3MTZjNDBjZTFhNyk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl81MjQ4MGY0ZTM0NDA0NWVhYTg1OWI2M2FhYjhkMWIyZSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc5ODcxLCAtMTIyLjI3NjIyMV0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF8xMjcwM2NiNjhjZjI0MDU3YWMzNzM3MTZjNDBjZTFhNyk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fYzNmZDE4OTFmZmNlNGYzOWIwODI5MGUzNjczN2Q3MWEgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImNhciIsICJpY29uQ29sb3IiOiAid2hpdGUiLCAibWFya2VyQ29sb3IiOiAiYmx1ZSIsICJwcmVmaXgiOiAiZmEifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfNTI0ODBmNGUzNDQwNDVlYWE4NTliNjNhYWI4ZDFiMmUuc2V0SWNvbihpY29uX2MzZmQxODkxZmZjZTRmMzliMDgyOTBlMzY3MzdkNzFhKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF84NjFiMjk1ZWU4MmE0MjhmOTA1YjdhNGU4MWM2NDk0OCA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfNjQ1M2FhMDcxYjdiNDJmOGFmZWZhNDY5NTZjNjViODcgPSAkKGA8ZGl2IGlkPSJodG1sXzY0NTNhYTA3MWI3YjQyZjhhZmVmYTQ2OTU2YzY1Yjg3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4yMDEyLTExLTAxIDA5OjA0OjAwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzg2MWIyOTVlZTgyYTQyOGY5MDViN2E0ZTgxYzY0OTQ4LnNldENvbnRlbnQoaHRtbF82NDUzYWEwNzFiN2I0MmY4YWZlZmE0Njk1NmM2NWI4Nyk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl81MjQ4MGY0ZTM0NDA0NWVhYTg1OWI2M2FhYjhkMWIyZS5iaW5kUG9wdXAocG9wdXBfODYxYjI5NWVlODJhNDI4ZjkwNWI3YTRlODFjNjQ5NDgpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfNDM1MjBlMTY2NGI1NDc3NzgxMTg2YjNiYWI5ZDA5ZWEgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43OTk2OTUsIC0xMjIuMjc0ODY4XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzEyNzAzY2I2OGNmMjQwNTdhYzM3MzcxNmM0MGNlMWE3KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl80OWZjMWViOWRmMjI0ZmY2YWFhMDA5NDc3NmVmYzBhNiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiY2FyIiwgImljb25Db2xvciI6ICJ3aGl0ZSIsICJtYXJrZXJDb2xvciI6ICJibHVlIiwgInByZWZpeCI6ICJmYSJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl80MzUyMGUxNjY0YjU0Nzc3ODExODZiM2JhYjlkMDllYS5zZXRJY29uKGljb25fNDlmYzFlYjlkZjIyNGZmNmFhYTAwOTQ3NzZlZmMwYTYpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzllNWQwYTNiMGIyNzRiOGY5ZTBhMDY0MDM0NjFmZTdlID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF85ZmUwYTJhM2M2OTQ0Yjg2OTk2NDhjMTFlZjU5ZmRhYyA9ICQoYDxkaXYgaWQ9Imh0bWxfOWZlMGEyYTNjNjk0NGI4Njk5NjQ4YzExZWY1OWZkYWMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPjIwMTItMTAtMjQgMTE6MTU6MDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfOWU1ZDBhM2IwYjI3NGI4ZjllMGEwNjQwMzQ2MWZlN2Uuc2V0Q29udGVudChodG1sXzlmZTBhMmEzYzY5NDRiODY5OTY0OGMxMWVmNTlmZGFjKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyXzQzNTIwZTE2NjRiNTQ3Nzc4MTE4NmIzYmFiOWQwOWVhLmJpbmRQb3B1cChwb3B1cF85ZTVkMGEzYjBiMjc0YjhmOWUwYTA2NDAzNDYxZmU3ZSkKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl9jYmI4ZjIzNjQzODc0YTZkYmI0MmE2MGZkYjJlYmM2MyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc5OTY5MywgLTEyMi4yNzQ4MDZdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfMTI3MDNjYjY4Y2YyNDA1N2FjMzczNzE2YzQwY2UxYTcpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uXzU1ZjE4ZGEyOWVjYjQxM2Y5MGQwOTg2NTRlMmM1MDQ0ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJjYXIiLCAiaWNvbkNvbG9yIjogIndoaXRlIiwgIm1hcmtlckNvbG9yIjogImJsdWUiLCAicHJlZml4IjogImZhIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyX2NiYjhmMjM2NDM4NzRhNmRiYjQyYTYwZmRiMmViYzYzLnNldEljb24oaWNvbl81NWYxOGRhMjllY2I0MTNmOTBkMDk4NjU0ZTJjNTA0NCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfZTM5MzQwY2YyODgyNDI2Y2EyYzVhOGQwOTRjMjAyNDYgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzg5OGVkNjRhMWM1MTRhZTY4ZWQyYTdjY2NjYjcwMDk5ID0gJChgPGRpdiBpZD0iaHRtbF84OThlZDY0YTFjNTE0YWU2OGVkMmE3Y2NjY2I3MDA5OSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+MjAxMi0xMC0yNCAxMTowMTowMDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9lMzkzNDBjZjI4ODI0MjZjYTJjNWE4ZDA5NGMyMDI0Ni5zZXRDb250ZW50KGh0bWxfODk4ZWQ2NGExYzUxNGFlNjhlZDJhN2NjY2NiNzAwOTkpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfY2JiOGYyMzY0Mzg3NGE2ZGJiNDJhNjBmZGIyZWJjNjMuYmluZFBvcHVwKHBvcHVwX2UzOTM0MGNmMjg4MjQyNmNhMmM1YThkMDk0YzIwMjQ2KQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyXzdmZTBkZmY4NzQxMTQ0MjJhZTIyNzY4ZTQwM2ZkMGVkID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzk5NzM1LCAtMTIyLjI3NDg5M10sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF8xMjcwM2NiNjhjZjI0MDU3YWMzNzM3MTZjNDBjZTFhNyk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fZGUyZjM5N2U2MDc2NGEyYjk2MGRjNWVlZWViNWYxYWEgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImNhciIsICJpY29uQ29sb3IiOiAid2hpdGUiLCAibWFya2VyQ29sb3IiOiAiYmx1ZSIsICJwcmVmaXgiOiAiZmEifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfN2ZlMGRmZjg3NDExNDQyMmFlMjI3NjhlNDAzZmQwZWQuc2V0SWNvbihpY29uX2RlMmYzOTdlNjA3NjRhMmI5NjBkYzVlZWVlYjVmMWFhKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF81NjM3ZmNhNjI5MTE0ZmIxOWU2OWY5N2FiZjMzYjI0NyA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfMTE3ZTkwODBlNzcxNGEyNWJiYzY3NDA5YjJlZDhjNWEgPSAkKGA8ZGl2IGlkPSJodG1sXzExN2U5MDgwZTc3MTRhMjViYmM2NzQwOWIyZWQ4YzVhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4yMDEyLTEwLTI0IDEwOjIwOjAwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzU2MzdmY2E2MjkxMTRmYjE5ZTY5Zjk3YWJmMzNiMjQ3LnNldENvbnRlbnQoaHRtbF8xMTdlOTA4MGU3NzE0YTI1YmJjNjc0MDliMmVkOGM1YSk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl83ZmUwZGZmODc0MTE0NDIyYWUyMjc2OGU0MDNmZDBlZC5iaW5kUG9wdXAocG9wdXBfNTYzN2ZjYTYyOTExNGZiMTllNjlmOTdhYmYzM2IyNDcpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfMDExY2M2NjY4N2EzNGE2MGIyODdmZGM5MTM0MzA2ZWYgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy44MDc1NTYsIC0xMjIuMjc4NDg1XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzEyNzAzY2I2OGNmMjQwNTdhYzM3MzcxNmM0MGNlMWE3KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl9hMmQyOTY1ZDA2YmM0NDY2YTM1ODRhNmNjODczNmVlYiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiY2FyIiwgImljb25Db2xvciI6ICJ3aGl0ZSIsICJtYXJrZXJDb2xvciI6ICJibHVlIiwgInByZWZpeCI6ICJmYSJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl8wMTFjYzY2Njg3YTM0YTYwYjI4N2ZkYzkxMzQzMDZlZi5zZXRJY29uKGljb25fYTJkMjk2NWQwNmJjNDQ2NmEzNTg0YTZjYzg3MzZlZWIpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzgwYTc4ZGZiZWVjOTQ5OTk4YTMyZmY4NTU3NzM3MDc2ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF8zMmM5ZjU2MGIzNWM0NWU3OGJhOTNlN2QxYTM2NTZhMSA9ICQoYDxkaXYgaWQ9Imh0bWxfMzJjOWY1NjBiMzVjNDVlNzhiYTkzZTdkMWEzNjU2YTEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPjIwMTMtMTItMzEgMTA6MDk6MDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfODBhNzhkZmJlZWM5NDk5OThhMzJmZjg1NTc3MzcwNzYuc2V0Q29udGVudChodG1sXzMyYzlmNTYwYjM1YzQ1ZTc4YmE5M2U3ZDFhMzY1NmExKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyXzAxMWNjNjY2ODdhMzRhNjBiMjg3ZmRjOTEzNDMwNmVmLmJpbmRQb3B1cChwb3B1cF84MGE3OGRmYmVlYzk0OTk5OGEzMmZmODU1NzczNzA3NikKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl8zZGRmZTQ4YzUxODc0ZWU5YjQxNGNmNjc2OTJmMjBkNiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc5NzU1OCwgLTEyMi4yNjkzNV0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF8xMjcwM2NiNjhjZjI0MDU3YWMzNzM3MTZjNDBjZTFhNyk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fMDdkNzk3NDgzOWQzNDEwNDllZTNkZjY4ZTM4OTI3NjYgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImNhciIsICJpY29uQ29sb3IiOiAid2hpdGUiLCAibWFya2VyQ29sb3IiOiAiYmx1ZSIsICJwcmVmaXgiOiAiZmEifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfM2RkZmU0OGM1MTg3NGVlOWI0MTRjZjY3NjkyZjIwZDYuc2V0SWNvbihpY29uXzA3ZDc5NzQ4MzlkMzQxMDQ5ZWUzZGY2OGUzODkyNzY2KTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF80M2ExMjZkZTJmMDM0ZDMwOWE4MzRkM2E1MTliYmFjYiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfMDg5ZmEwMmExYTljNDI3NThlNzZkZjIyMDZhOTU5NjIgPSAkKGA8ZGl2IGlkPSJodG1sXzA4OWZhMDJhMWE5YzQyNzU4ZTc2ZGYyMjA2YTk1OTYyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4yMDE0LTA1LTA4IDE5OjMwOjAwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzQzYTEyNmRlMmYwMzRkMzA5YTgzNGQzYTUxOWJiYWNiLnNldENvbnRlbnQoaHRtbF8wODlmYTAyYTFhOWM0Mjc1OGU3NmRmMjIwNmE5NTk2Mik7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl8zZGRmZTQ4YzUxODc0ZWU5YjQxNGNmNjc2OTJmMjBkNi5iaW5kUG9wdXAocG9wdXBfNDNhMTI2ZGUyZjAzNGQzMDlhODM0ZDNhNTE5YmJhY2IpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfZDQzMWI4NzBkN2JlNDM3ZTg2OTYxZWZiNGJkYTliYjkgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43OTkyNjkxMDgwNDg3MSwgLTEyMi4yNzQ5NzY5NzQyMTA4NF0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF8xMjcwM2NiNjhjZjI0MDU3YWMzNzM3MTZjNDBjZTFhNyk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fNTJjM2MzOTliYTM5NDYwZWI4NTdiYWQ1NjRmZDIwZDIgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImluZm8tc2lnbiIsICJpY29uQ29sb3IiOiAid2hpdGUiLCAibWFya2VyQ29sb3IiOiAibGlnaHRncmF5IiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfZDQzMWI4NzBkN2JlNDM3ZTg2OTYxZWZiNGJkYTliYjkuc2V0SWNvbihpY29uXzUyYzNjMzk5YmEzOTQ2MGViODU3YmFkNTY0ZmQyMGQyKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9jNGJjYzUwODA3ZjI0ZTI4OWQ1MTViOWE4YjkzZTdlNCA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfNGIxOWVhNmI1OGIxNDFkM2JiM2YyYmYxODZkMDEzN2QgPSAkKGA8ZGl2IGlkPSJodG1sXzRiMTllYTZiNThiMTQxZDNiYjNmMmJmMTg2ZDAxMzdkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Qb2xpY2UgRGVwdDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9jNGJjYzUwODA3ZjI0ZTI4OWQ1MTViOWE4YjkzZTdlNC5zZXRDb250ZW50KGh0bWxfNGIxOWVhNmI1OGIxNDFkM2JiM2YyYmYxODZkMDEzN2QpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfZDQzMWI4NzBkN2JlNDM3ZTg2OTYxZWZiNGJkYTliYjkuYmluZFBvcHVwKHBvcHVwX2M0YmNjNTA4MDdmMjRlMjg5ZDUxNWI5YThiOTNlN2U0KQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyXzc2MmRiYjRhOWNkNjQyYmRhYjY0OWVmMDNjYjhiNjJkID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuODA1NDk4MzkzMDMzMjA0LCAtMTIyLjI3MjU1NTEzMTg4MTddLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfMTI3MDNjYjY4Y2YyNDA1N2FjMzczNzE2YzQwY2UxYTcpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uXzRiOTIzMTA1YTIyZTQwYzg4MjNiOWU4NmYyNjY5ZmYxID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJpbmZvLXNpZ24iLCAiaWNvbkNvbG9yIjogIndoaXRlIiwgIm1hcmtlckNvbG9yIjogImxpZ2h0Z3JheSIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyXzc2MmRiYjRhOWNkNjQyYmRhYjY0OWVmMDNjYjhiNjJkLnNldEljb24oaWNvbl80YjkyMzEwNWEyMmU0MGM4ODIzYjllODZmMjY2OWZmMSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfZTFhMTNhN2IwOWFjNGY5YzkyNzc1MmQ3ZjJhN2VlMTIgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzM2MDI3ZDc5MWMyZjQ0ODE5ZWJiNDI4NzMyYTNmYjg0ID0gJChgPGRpdiBpZD0iaHRtbF8zNjAyN2Q3OTFjMmY0NDgxOWViYjQyODczMmEzZmI4NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2l0eSBIYWxsPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2UxYTEzYTdiMDlhYzRmOWM5Mjc3NTJkN2YyYTdlZTEyLnNldENvbnRlbnQoaHRtbF8zNjAyN2Q3OTFjMmY0NDgxOWViYjQyODczMmEzZmI4NCk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl83NjJkYmI0YTljZDY0MmJkYWI2NDllZjAzY2I4YjYyZC5iaW5kUG9wdXAocG9wdXBfZTFhMTNhN2IwOWFjNGY5YzkyNzc1MmQ3ZjJhN2VlMTIpCiAgICAgICAgOwoKICAgICAgICAKICAgIAo8L3NjcmlwdD4= onload="this.contentDocument.open();this.contentDocument.write(atob(this.getAttribute('data-html')));this.contentDocument.close();" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div></div></div>
</div>
<p>OK, so it’s been seen near the Oakland police department.  This should make you suspect we might be getting a bit of a biased sample.  Why might the Oakland PD be the most common place where her car is seen?  Can you come up with a plausible explanation for this?</p>
</div>
<div class="section" id="poking-around">
<h2>Poking around<a class="headerlink" href="#poking-around" title="Permalink to this headline">#</a></h2>
<p>Let’s try another.  And let’s see if we can make the map a little more fancy.
It’d be nice to distinguish between license plate reads that are seen during
the daytime (on a weekday), vs the evening (on a weekday), vs on a weekend.  So
we’ll color-code the markers.  To do this, we’ll write some Python code to
analyze the ‘Timestamp’ and choose an appropriate color.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_color</span><span class="p">(</span><span class="n">ts</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ts</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">6</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;green&#39;</span> <span class="c1"># Weekend</span>
    <span class="k">elif</span> <span class="n">ts</span><span class="o">.</span><span class="n">hour</span> <span class="o">&gt;=</span> <span class="mi">6</span> <span class="ow">and</span> <span class="n">ts</span><span class="o">.</span><span class="n">hour</span> <span class="o">&lt;=</span> <span class="mi">17</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;blue&#39;</span> <span class="c1"># Weekday daytime</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;red&#39;</span> <span class="c1"># Weekday evening</span>


<span class="c1"># Apply the function to the Timestamp column, make new column.</span>
<span class="n">lprs</span><span class="p">[</span><span class="s1">&#39;Color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lprs</span><span class="p">[</span><span class="s1">&#39;Timestamp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">get_color</span><span class="p">)</span>
<span class="n">lprs</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Plate</th>
      <th>Timestamp</th>
      <th>Latitude</th>
      <th>Longitude</th>
      <th>Color</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>6HVB598</td>
      <td>2012-11-20 13:34:00</td>
      <td>37.687040</td>
      <td>-122.134973</td>
      <td>blue</td>
    </tr>
    <tr>
      <th>1</th>
      <td>5WVD836</td>
      <td>2012-11-20 13:34:00</td>
      <td>37.687030</td>
      <td>-122.134973</td>
      <td>blue</td>
    </tr>
    <tr>
      <th>2</th>
      <td>6B57142</td>
      <td>2012-11-20 13:34:00</td>
      <td>37.686998</td>
      <td>-122.134975</td>
      <td>blue</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4FSH999</td>
      <td>2012-11-20 13:34:00</td>
      <td>37.795501</td>
      <td>-122.206155</td>
      <td>blue</td>
    </tr>
    <tr>
      <th>4</th>
      <td>6B57142</td>
      <td>2012-11-20 13:34:00</td>
      <td>37.686898</td>
      <td>-122.135020</td>
      <td>blue</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Now we can check out another license plate, this time with our spiffy
color-coding.  This one happens to be the car that the city issues to the Fire
Chief.  At the time this was <a class="reference external" href="https://localwiki.org/oakland/Teresa_Deloach_Reed">Teresa Deloach
Reed</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fire_chief</span> <span class="o">=</span> <span class="n">lprs</span><span class="p">[</span><span class="n">lprs</span><span class="p">[</span><span class="s1">&#39;Plate&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;1328354&#39;</span><span class="p">]</span>
<span class="n">fire_chief</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Plate</th>
      <th>Timestamp</th>
      <th>Latitude</th>
      <th>Longitude</th>
      <th>Color</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>5845</th>
      <td>1328354</td>
      <td>2012-11-19 16:36:00</td>
      <td>37.806201</td>
      <td>-122.270495</td>
      <td>blue</td>
    </tr>
    <tr>
      <th>113989</th>
      <td>1328354</td>
      <td>2012-11-09 15:27:00</td>
      <td>37.805775</td>
      <td>-122.270203</td>
      <td>blue</td>
    </tr>
    <tr>
      <th>125262</th>
      <td>1328354</td>
      <td>2012-11-07 18:00:00</td>
      <td>37.827588</td>
      <td>-122.271633</td>
      <td>red</td>
    </tr>
    <tr>
      <th>223196</th>
      <td>1328354</td>
      <td>2012-10-29 13:21:00</td>
      <td>37.806306</td>
      <td>-122.271138</td>
      <td>blue</td>
    </tr>
    <tr>
      <th>223221</th>
      <td>1328354</td>
      <td>2012-10-29 13:19:00</td>
      <td>37.805310</td>
      <td>-122.270435</td>
      <td>blue</td>
    </tr>
    <tr>
      <th>729263</th>
      <td>1328354</td>
      <td>2012-09-13 23:17:00</td>
      <td>37.837506</td>
      <td>-122.268958</td>
      <td>red</td>
    </tr>
    <tr>
      <th>991925</th>
      <td>1328354</td>
      <td>2014-01-19 23:52:00</td>
      <td>37.773185</td>
      <td>-122.138043</td>
      <td>green</td>
    </tr>
    <tr>
      <th>1032526</th>
      <td>1328354</td>
      <td>2014-01-15 15:29:00</td>
      <td>37.806376</td>
      <td>-122.270555</td>
      <td>blue</td>
    </tr>
    <tr>
      <th>2463216</th>
      <td>1328354</td>
      <td>2014-05-13 17:50:00</td>
      <td>37.808980</td>
      <td>-122.274521</td>
      <td>blue</td>
    </tr>
    <tr>
      <th>2488083</th>
      <td>1328354</td>
      <td>2014-05-09 16:59:00</td>
      <td>37.805856</td>
      <td>-122.274986</td>
      <td>blue</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">oak_map</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">OAK_PD_COORDS</span><span class="p">,</span>
                     <span class="n">tiles</span><span class="o">=</span><span class="s1">&#39;OpenStreetMap&#39;</span><span class="p">,</span>
                     <span class="n">zoom_start</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">fire_chief</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
        <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;Latitude&#39;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Longitude&#39;</span><span class="p">]],</span>
        <span class="n">popup</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;Timestamp&#39;</span><span class="p">],</span>
        <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;Color&#39;</span><span class="p">],</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;car&#39;</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;fa&#39;</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">oak_map</span><span class="p">)</span>

<span class="c1"># City Hall</span>
<span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">OAK_CITY_HALL_COORDS</span><span class="p">,</span>
              <span class="n">popup</span><span class="o">=</span><span class="s1">&#39;City Hall&#39;</span><span class="p">,</span>
              <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;lightgray&#39;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;info-sign&#39;</span><span class="p">)</span>
             <span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">oak_map</span><span class="p">)</span>

<span class="n">oak_map</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe src="about:blank" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" data-html=PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgCiAgICAgICAgPHNjcmlwdD4KICAgICAgICAgICAgTF9OT19UT1VDSCA9IGZhbHNlOwogICAgICAgICAgICBMX0RJU0FCTEVfM0QgPSBmYWxzZTsKICAgICAgICA8L3NjcmlwdD4KICAgIAogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbGVhZmxldEAxLjYuMC9kaXN0L2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0xLjEyLjQubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5qcyI+PC9zY3JpcHQ+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbGVhZmxldEAxLjYuMC9kaXN0L2xlYWZsZXQuY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vYm9vdHN0cmFwLzMuMi4wL2Nzcy9ib290c3RyYXAubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9mb250LWF3ZXNvbWUvNC42LjMvY3NzL2ZvbnQtYXdlc29tZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL0xlYWZsZXQuYXdlc29tZS1tYXJrZXJzLzIuMC4yL2xlYWZsZXQuYXdlc29tZS1tYXJrZXJzLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhd2Nkbi5naXRoYWNrLmNvbS9weXRob24tdmlzdWFsaXphdGlvbi9mb2xpdW0vbWFzdGVyL2ZvbGl1bS90ZW1wbGF0ZXMvbGVhZmxldC5hd2Vzb21lLnJvdGF0ZS5jc3MiLz4KICAgIDxzdHlsZT5odG1sLCBib2R5IHt3aWR0aDogMTAwJTtoZWlnaHQ6IDEwMCU7bWFyZ2luOiAwO3BhZGRpbmc6IDA7fTwvc3R5bGU+CiAgICA8c3R5bGU+I21hcCB7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7Ym90dG9tOjA7cmlnaHQ6MDtsZWZ0OjA7fTwvc3R5bGU+CiAgICAKICAgICAgICAgICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwKICAgICAgICAgICAgICAgIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyIgLz4KICAgICAgICAgICAgPHN0eWxlPgogICAgICAgICAgICAgICAgI21hcF9jYjJlOGEzZWQ0OTc0ZjE3OTFjZmJmZDlhZmFjZDJmZCB7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAuMCU7CiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgICAgICB0b3A6IDAuMCU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgCjwvaGVhZD4KPGJvZHk+ICAgIAogICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvbGl1bS1tYXAiIGlkPSJtYXBfY2IyZThhM2VkNDk3NGYxNzkxY2ZiZmQ5YWZhY2QyZmQiID48L2Rpdj4KICAgICAgICAKPC9ib2R5Pgo8c2NyaXB0PiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFwX2NiMmU4YTNlZDQ5NzRmMTc5MWNmYmZkOWFmYWNkMmZkID0gTC5tYXAoCiAgICAgICAgICAgICAgICAibWFwX2NiMmU4YTNlZDQ5NzRmMTc5MWNmYmZkOWFmYWNkMmZkIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IFszNy43OTkyNjkxMDgwNDg3MSwgLTEyMi4yNzQ5NzY5NzQyMTA4NF0sCiAgICAgICAgICAgICAgICAgICAgY3JzOiBMLkNSUy5FUFNHMzg1NywKICAgICAgICAgICAgICAgICAgICB6b29tOiAxMiwKICAgICAgICAgICAgICAgICAgICB6b29tQ29udHJvbDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBwcmVmZXJDYW52YXM6IGZhbHNlLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwoKICAgICAgICAgICAgCgogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciB0aWxlX2xheWVyX2UzN2Y5ZGMzNzRjZTQ0YzM4ZDgwNzFhZjFlMjc3MThiID0gTC50aWxlTGF5ZXIoCiAgICAgICAgICAgICAgICAiaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmciLAogICAgICAgICAgICAgICAgeyJhdHRyaWJ1dGlvbiI6ICJEYXRhIGJ5IFx1MDAyNmNvcHk7IFx1MDAzY2EgaHJlZj1cImh0dHA6Ly9vcGVuc3RyZWV0bWFwLm9yZ1wiXHUwMDNlT3BlblN0cmVldE1hcFx1MDAzYy9hXHUwMDNlLCB1bmRlciBcdTAwM2NhIGhyZWY9XCJodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodFwiXHUwMDNlT0RiTFx1MDAzYy9hXHUwMDNlLiIsICJkZXRlY3RSZXRpbmEiOiBmYWxzZSwgIm1heE5hdGl2ZVpvb20iOiAxOCwgIm1heFpvb20iOiAxOCwgIm1pblpvb20iOiAwLCAibm9XcmFwIjogZmFsc2UsICJvcGFjaXR5IjogMSwgInN1YmRvbWFpbnMiOiAiYWJjIiwgInRtcyI6IGZhbHNlfQogICAgICAgICAgICApLmFkZFRvKG1hcF9jYjJlOGEzZWQ0OTc0ZjE3OTFjZmJmZDlhZmFjZDJmZCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl83YzM1ZmVkNWQ4N2M0Mjg1YmViODYyYjMxZTgyNThkMSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3LjgwNjIwMSwgLTEyMi4yNzA0OTVdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfY2IyZThhM2VkNDk3NGYxNzkxY2ZiZmQ5YWZhY2QyZmQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uX2FhZmE3NTQ3NGU3MDRjMDdhNjliY2Q0NTBiMGRhOTVmID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJjYXIiLCAiaWNvbkNvbG9yIjogIndoaXRlIiwgIm1hcmtlckNvbG9yIjogImJsdWUiLCAicHJlZml4IjogImZhIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyXzdjMzVmZWQ1ZDg3YzQyODViZWI4NjJiMzFlODI1OGQxLnNldEljb24oaWNvbl9hYWZhNzU0NzRlNzA0YzA3YTY5YmNkNDUwYjBkYTk1Zik7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfNzg4NDBlNGVjMGI5NGRmZTg5YWFjNjMyNjMyYmM4MGIgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2I3NmVkNWYzYmRmMzQ0NmJhZWJkODQ5MDg0Nzg2OGZmID0gJChgPGRpdiBpZD0iaHRtbF9iNzZlZDVmM2JkZjM0NDZiYWViZDg0OTA4NDc4NjhmZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+MjAxMi0xMS0xOSAxNjozNjowMDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF83ODg0MGU0ZWMwYjk0ZGZlODlhYWM2MzI2MzJiYzgwYi5zZXRDb250ZW50KGh0bWxfYjc2ZWQ1ZjNiZGYzNDQ2YmFlYmQ4NDkwODQ3ODY4ZmYpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfN2MzNWZlZDVkODdjNDI4NWJlYjg2MmIzMWU4MjU4ZDEuYmluZFBvcHVwKHBvcHVwXzc4ODQwZTRlYzBiOTRkZmU4OWFhYzYzMjYzMmJjODBiKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2Y1MmU5NGUxYjk1ZjRhM2ZiOTdmYmJhYWE0OTBiYzgwID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuODA1Nzc1LCAtMTIyLjI3MDIwM10sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9jYjJlOGEzZWQ0OTc0ZjE3OTFjZmJmZDlhZmFjZDJmZCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fMWY0M2JmYTA4MGEzNGFlZGJkNDFjMTI4NzI0ZGYwMDAgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImNhciIsICJpY29uQ29sb3IiOiAid2hpdGUiLCAibWFya2VyQ29sb3IiOiAiYmx1ZSIsICJwcmVmaXgiOiAiZmEifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfZjUyZTk0ZTFiOTVmNGEzZmI5N2ZiYmFhYTQ5MGJjODAuc2V0SWNvbihpY29uXzFmNDNiZmEwODBhMzRhZWRiZDQxYzEyODcyNGRmMDAwKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF8zZDdjNmRkMTVhMGU0YmQyYTQ2NDRjMDQxNTgzYmE0NyA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfYzVlNjc3MDgxODgwNDNhYjg2NWU0MWViMTgwOTM3YTQgPSAkKGA8ZGl2IGlkPSJodG1sX2M1ZTY3NzA4MTg4MDQzYWI4NjVlNDFlYjE4MDkzN2E0IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4yMDEyLTExLTA5IDE1OjI3OjAwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzNkN2M2ZGQxNWEwZTRiZDJhNDY0NGMwNDE1ODNiYTQ3LnNldENvbnRlbnQoaHRtbF9jNWU2NzcwODE4ODA0M2FiODY1ZTQxZWIxODA5MzdhNCk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl9mNTJlOTRlMWI5NWY0YTNmYjk3ZmJiYWFhNDkwYmM4MC5iaW5kUG9wdXAocG9wdXBfM2Q3YzZkZDE1YTBlNGJkMmE0NjQ0YzA0MTU4M2JhNDcpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfMDE3YjIxMmU3N2RiNDMzNjliNDU5ODZiYmQ0N2E3ZTIgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy44Mjc1ODgsIC0xMjIuMjcxNjMzXSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2NiMmU4YTNlZDQ5NzRmMTc5MWNmYmZkOWFmYWNkMmZkKTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl85ZDMwNDJmMmNjMGU0NTg0YmE1MjYzZGM2OTU4YTM4YSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiY2FyIiwgImljb25Db2xvciI6ICJ3aGl0ZSIsICJtYXJrZXJDb2xvciI6ICJyZWQiLCAicHJlZml4IjogImZhIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyXzAxN2IyMTJlNzdkYjQzMzY5YjQ1OTg2YmJkNDdhN2UyLnNldEljb24oaWNvbl85ZDMwNDJmMmNjMGU0NTg0YmE1MjYzZGM2OTU4YTM4YSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfZTc5Yzk3MzY5NzE1NDVhMGI3ZWNiMzkyYzE2ODU1OTYgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzBhOTg1NzYyMjc3ZjQxYTViMDkzNWY5ODFlOGJiNGZlID0gJChgPGRpdiBpZD0iaHRtbF8wYTk4NTc2MjI3N2Y0MWE1YjA5MzVmOTgxZThiYjRmZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+MjAxMi0xMS0wNyAxODowMDowMDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9lNzljOTczNjk3MTU0NWEwYjdlY2IzOTJjMTY4NTU5Ni5zZXRDb250ZW50KGh0bWxfMGE5ODU3NjIyNzdmNDFhNWIwOTM1Zjk4MWU4YmI0ZmUpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfMDE3YjIxMmU3N2RiNDMzNjliNDU5ODZiYmQ0N2E3ZTIuYmluZFBvcHVwKHBvcHVwX2U3OWM5NzM2OTcxNTQ1YTBiN2VjYjM5MmMxNjg1NTk2KQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyXzFiY2Y2Y2U3MmMxMDQ2ZjFiMGE2NjA3YzY1MTc5YzAxID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuODA2MzA2LCAtMTIyLjI3MTEzOF0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9jYjJlOGEzZWQ0OTc0ZjE3OTFjZmJmZDlhZmFjZDJmZCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fOTQ3ODg1YTEwNTNjNDFhOWEzMTQwYjE0YWVhM2QxMmUgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImNhciIsICJpY29uQ29sb3IiOiAid2hpdGUiLCAibWFya2VyQ29sb3IiOiAiYmx1ZSIsICJwcmVmaXgiOiAiZmEifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfMWJjZjZjZTcyYzEwNDZmMWIwYTY2MDdjNjUxNzljMDEuc2V0SWNvbihpY29uXzk0Nzg4NWExMDUzYzQxYTlhMzE0MGIxNGFlYTNkMTJlKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF8yZGNlMjliZDYyMDY0Mjg0YTFhNjA5MmJmNzQxMzA3NyA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfNjIyYTVjZWEzNzllNGE2YWE1YjNlOTBjNTM0NjVkNzEgPSAkKGA8ZGl2IGlkPSJodG1sXzYyMmE1Y2VhMzc5ZTRhNmFhNWIzZTkwYzUzNDY1ZDcxIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4yMDEyLTEwLTI5IDEzOjIxOjAwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzJkY2UyOWJkNjIwNjQyODRhMWE2MDkyYmY3NDEzMDc3LnNldENvbnRlbnQoaHRtbF82MjJhNWNlYTM3OWU0YTZhYTViM2U5MGM1MzQ2NWQ3MSk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl8xYmNmNmNlNzJjMTA0NmYxYjBhNjYwN2M2NTE3OWMwMS5iaW5kUG9wdXAocG9wdXBfMmRjZTI5YmQ2MjA2NDI4NGExYTYwOTJiZjc0MTMwNzcpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfZDhlMTFjNWRiYjNkNGRkMTg3ZWM2OTVhNWRhMzNjZDYgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy44MDUzMSwgLTEyMi4yNzA0MzVdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfY2IyZThhM2VkNDk3NGYxNzkxY2ZiZmQ5YWZhY2QyZmQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uX2I4MTI3M2UyY2Q5NTQyZWQ5OWYxODZkMzc1NDY4YjcwID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJjYXIiLCAiaWNvbkNvbG9yIjogIndoaXRlIiwgIm1hcmtlckNvbG9yIjogImJsdWUiLCAicHJlZml4IjogImZhIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyX2Q4ZTExYzVkYmIzZDRkZDE4N2VjNjk1YTVkYTMzY2Q2LnNldEljb24oaWNvbl9iODEyNzNlMmNkOTU0MmVkOTlmMTg2ZDM3NTQ2OGI3MCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfYTY3OWY4MzAwNDA2NDM3M2ExZjg0NmY4ZjNmOGVkZjIgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzZlOTc5N2IwMjVlZjQ1NmE4MzEwMjY2MTkzYmU2MzZiID0gJChgPGRpdiBpZD0iaHRtbF82ZTk3OTdiMDI1ZWY0NTZhODMxMDI2NjE5M2JlNjM2YiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+MjAxMi0xMC0yOSAxMzoxOTowMDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9hNjc5ZjgzMDA0MDY0MzczYTFmODQ2ZjhmM2Y4ZWRmMi5zZXRDb250ZW50KGh0bWxfNmU5Nzk3YjAyNWVmNDU2YTgzMTAyNjYxOTNiZTYzNmIpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfZDhlMTFjNWRiYjNkNGRkMTg3ZWM2OTVhNWRhMzNjZDYuYmluZFBvcHVwKHBvcHVwX2E2NzlmODMwMDQwNjQzNzNhMWY4NDZmOGYzZjhlZGYyKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyXzZmZWVmZmRhNmU2YjRjMjZiYTRlODljODBjN2VjNTNmID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuODM3NTA2LCAtMTIyLjI2ODk1OF0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9jYjJlOGEzZWQ0OTc0ZjE3OTFjZmJmZDlhZmFjZDJmZCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fNzA4MmM3YWE2YzQxNGUxNWEwZTE4MGI4MzNkY2UyMDggPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImNhciIsICJpY29uQ29sb3IiOiAid2hpdGUiLCAibWFya2VyQ29sb3IiOiAicmVkIiwgInByZWZpeCI6ICJmYSJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl82ZmVlZmZkYTZlNmI0YzI2YmE0ZTg5YzgwYzdlYzUzZi5zZXRJY29uKGljb25fNzA4MmM3YWE2YzQxNGUxNWEwZTE4MGI4MzNkY2UyMDgpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzM2NmM0OGE2NDRiYTRkZTc4OGM4MTYyMWUxOWNjZTI2ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF9mODgyNWNiNGU4Y2Y0MWMzODE0ODk0NjBjNjFjZjM5MCA9ICQoYDxkaXYgaWQ9Imh0bWxfZjg4MjVjYjRlOGNmNDFjMzgxNDg5NDYwYzYxY2YzOTAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPjIwMTItMDktMTMgMjM6MTc6MDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfMzY2YzQ4YTY0NGJhNGRlNzg4YzgxNjIxZTE5Y2NlMjYuc2V0Q29udGVudChodG1sX2Y4ODI1Y2I0ZThjZjQxYzM4MTQ4OTQ2MGM2MWNmMzkwKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyXzZmZWVmZmRhNmU2YjRjMjZiYTRlODljODBjN2VjNTNmLmJpbmRQb3B1cChwb3B1cF8zNjZjNDhhNjQ0YmE0ZGU3ODhjODE2MjFlMTljY2UyNikKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl9jM2IyZmRjNzY0ODQ0Y2E2YTE3NTdhZmJiYmRiMGJlMSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc3MzE4NSwgLTEyMi4xMzgwNDNdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfY2IyZThhM2VkNDk3NGYxNzkxY2ZiZmQ5YWZhY2QyZmQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uXzA0NmIzMTE3ZmY1ZDRkMjU5OGEwMzRjMjEzNGJhYzZhID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJjYXIiLCAiaWNvbkNvbG9yIjogIndoaXRlIiwgIm1hcmtlckNvbG9yIjogImdyZWVuIiwgInByZWZpeCI6ICJmYSJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl9jM2IyZmRjNzY0ODQ0Y2E2YTE3NTdhZmJiYmRiMGJlMS5zZXRJY29uKGljb25fMDQ2YjMxMTdmZjVkNGQyNTk4YTAzNGMyMTM0YmFjNmEpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzA4ZDVkYzk0ZDgwOTQ5YjU5YjE2YWU5NGY1MWI3N2IxID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF85MDRhMDgxZmRkOGY0YjgyOTNlZmIwOGQ5NTQ1NmFmMSA9ICQoYDxkaXYgaWQ9Imh0bWxfOTA0YTA4MWZkZDhmNGI4MjkzZWZiMDhkOTU0NTZhZjEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPjIwMTQtMDEtMTkgMjM6NTI6MDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfMDhkNWRjOTRkODA5NDliNTliMTZhZTk0ZjUxYjc3YjEuc2V0Q29udGVudChodG1sXzkwNGEwODFmZGQ4ZjRiODI5M2VmYjA4ZDk1NDU2YWYxKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyX2MzYjJmZGM3NjQ4NDRjYTZhMTc1N2FmYmJiZGIwYmUxLmJpbmRQb3B1cChwb3B1cF8wOGQ1ZGM5NGQ4MDk0OWI1OWIxNmFlOTRmNTFiNzdiMSkKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl9lZDg3MmMxOTFlMWQ0NmUwOWU1MDA2ZDg5YWE4ZjUwMyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3LjgwNjM3NiwgLTEyMi4yNzA1NTVdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfY2IyZThhM2VkNDk3NGYxNzkxY2ZiZmQ5YWZhY2QyZmQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uXzc5YmE2YWMwZGJmYjQwYzdiMzJhMDJjMDQxYzZhYzVjID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJjYXIiLCAiaWNvbkNvbG9yIjogIndoaXRlIiwgIm1hcmtlckNvbG9yIjogImJsdWUiLCAicHJlZml4IjogImZhIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyX2VkODcyYzE5MWUxZDQ2ZTA5ZTUwMDZkODlhYThmNTAzLnNldEljb24oaWNvbl83OWJhNmFjMGRiZmI0MGM3YjMyYTAyYzA0MWM2YWM1Yyk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfMjZlYzYxN2I5MzVlNDJkYmE4MTg2OTg2NTRjZTcwNjMgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzFiMTgzMTg1NzE2ODQzZjJhNTFlZDgwMzJlYjBjYjVmID0gJChgPGRpdiBpZD0iaHRtbF8xYjE4MzE4NTcxNjg0M2YyYTUxZWQ4MDMyZWIwY2I1ZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+MjAxNC0wMS0xNSAxNToyOTowMDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF8yNmVjNjE3YjkzNWU0MmRiYTgxODY5ODY1NGNlNzA2My5zZXRDb250ZW50KGh0bWxfMWIxODMxODU3MTY4NDNmMmE1MWVkODAzMmViMGNiNWYpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfZWQ4NzJjMTkxZTFkNDZlMDllNTAwNmQ4OWFhOGY1MDMuYmluZFBvcHVwKHBvcHVwXzI2ZWM2MTdiOTM1ZTQyZGJhODE4Njk4NjU0Y2U3MDYzKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2RmYjFjMjJlOGI4ODRmMzI5ZWI0OWZjZWI0Y2VkZWQ2ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuODA4OTgsIC0xMjIuMjc0NTIxXSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2NiMmU4YTNlZDQ5NzRmMTc5MWNmYmZkOWFmYWNkMmZkKTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl82MDUxNDY5OWM2NTk0NWU5YTYwNDI3M2ViN2NlMjFmMyA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiY2FyIiwgImljb25Db2xvciI6ICJ3aGl0ZSIsICJtYXJrZXJDb2xvciI6ICJibHVlIiwgInByZWZpeCI6ICJmYSJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl9kZmIxYzIyZThiODg0ZjMyOWViNDlmY2ViNGNlZGVkNi5zZXRJY29uKGljb25fNjA1MTQ2OTljNjU5NDVlOWE2MDQyNzNlYjdjZTIxZjMpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzllMzA3Yzg2MDY4NjRiYTA5ZmM5NjM3YmQzM2I1ZmVmID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF84MmY0NTA1MzAyNTk0MTMzOTk2NWI2N2U0NTEzMzdhYiA9ICQoYDxkaXYgaWQ9Imh0bWxfODJmNDUwNTMwMjU5NDEzMzk5NjViNjdlNDUxMzM3YWIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPjIwMTQtMDUtMTMgMTc6NTA6MDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfOWUzMDdjODYwNjg2NGJhMDlmYzk2MzdiZDMzYjVmZWYuc2V0Q29udGVudChodG1sXzgyZjQ1MDUzMDI1OTQxMzM5OTY1YjY3ZTQ1MTMzN2FiKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyX2RmYjFjMjJlOGI4ODRmMzI5ZWI0OWZjZWI0Y2VkZWQ2LmJpbmRQb3B1cChwb3B1cF85ZTMwN2M4NjA2ODY0YmEwOWZjOTYzN2JkMzNiNWZlZikKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl82ZmM4YTQzYWU0ZjY0OWYzYmJjNTIzZWMzNWZmNWRiNiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3LjgwNTg1NiwgLTEyMi4yNzQ5ODZdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfY2IyZThhM2VkNDk3NGYxNzkxY2ZiZmQ5YWZhY2QyZmQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uXzQ2NjdiZTA3ZDg0ZTQwN2NhYzVmYjY3MjE2MzliMDBjID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJjYXIiLCAiaWNvbkNvbG9yIjogIndoaXRlIiwgIm1hcmtlckNvbG9yIjogImJsdWUiLCAicHJlZml4IjogImZhIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyXzZmYzhhNDNhZTRmNjQ5ZjNiYmM1MjNlYzM1ZmY1ZGI2LnNldEljb24oaWNvbl80NjY3YmUwN2Q4NGU0MDdjYWM1ZmI2NzIxNjM5YjAwYyk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfZjE2YTYyMTk1N2YxNDBlYWFhYzQ1ODc2OGI1ZWNhY2UgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzlkZmI0MWExNDU2MTRlNDc4NWFiZWQxMjM1ODM5YzVhID0gJChgPGRpdiBpZD0iaHRtbF85ZGZiNDFhMTQ1NjE0ZTQ3ODVhYmVkMTIzNTgzOWM1YSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+MjAxNC0wNS0wOSAxNjo1OTowMDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9mMTZhNjIxOTU3ZjE0MGVhYWFjNDU4NzY4YjVlY2FjZS5zZXRDb250ZW50KGh0bWxfOWRmYjQxYTE0NTYxNGU0Nzg1YWJlZDEyMzU4MzljNWEpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfNmZjOGE0M2FlNGY2NDlmM2JiYzUyM2VjMzVmZjVkYjYuYmluZFBvcHVwKHBvcHVwX2YxNmE2MjE5NTdmMTQwZWFhYWM0NTg3NjhiNWVjYWNlKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyXzAxMjc3ZDg0MDFlOTRiOTI5ODk4ZjVlM2M0MDVkYTA2ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuODA1NDk4MzkzMDMzMjA0LCAtMTIyLjI3MjU1NTEzMTg4MTddLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfY2IyZThhM2VkNDk3NGYxNzkxY2ZiZmQ5YWZhY2QyZmQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uX2ZkMjMwODI5ZjVlNDRmOTM5NjNhYjBhNTRjYmM2NjBkID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJpbmZvLXNpZ24iLCAiaWNvbkNvbG9yIjogIndoaXRlIiwgIm1hcmtlckNvbG9yIjogImxpZ2h0Z3JheSIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyXzAxMjc3ZDg0MDFlOTRiOTI5ODk4ZjVlM2M0MDVkYTA2LnNldEljb24oaWNvbl9mZDIzMDgyOWY1ZTQ0ZjkzOTYzYWIwYTU0Y2JjNjYwZCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfMzhjZWQ4M2NjYmE2NDc0NWEwNjYzNzEwYTlmNTIzNmEgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzIzZTIwZWFiY2M2NjRiMmI5MTFmZmEzNzQ3YzYzNGRmID0gJChgPGRpdiBpZD0iaHRtbF8yM2UyMGVhYmNjNjY0YjJiOTExZmZhMzc0N2M2MzRkZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2l0eSBIYWxsPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzM4Y2VkODNjY2JhNjQ3NDVhMDY2MzcxMGE5ZjUyMzZhLnNldENvbnRlbnQoaHRtbF8yM2UyMGVhYmNjNjY0YjJiOTExZmZhMzc0N2M2MzRkZik7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl8wMTI3N2Q4NDAxZTk0YjkyOTg5OGY1ZTNjNDA1ZGEwNi5iaW5kUG9wdXAocG9wdXBfMzhjZWQ4M2NjYmE2NDc0NWEwNjYzNzEwYTlmNTIzNmEpCiAgICAgICAgOwoKICAgICAgICAKICAgIAo8L3NjcmlwdD4= onload="this.contentDocument.open();this.contentDocument.write(atob(this.getAttribute('data-html')));this.contentDocument.close();" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div></div></div>
</div>
<p>Hmm.  We can see a blue cluster in downtown Oakland, where the Fire Chief’s car
was seen on weekdays during business hours.  I bet we’ve found her office.  As
you can see from the ‘City Hall’ marker, those are mostly clustered right near
City Hall.  Also, her car was seen twice in northern Oakland on weekday
evenings.  One can only speculate what that indicates.  Maybe dinner with a
friend?  Or running errands?  Off to the scene of a fire?  Who knows.  And then
the car has been seen once more, late at night on a weekend, in a residential
area in the hills.  Her home address, maybe?</p>
<p>Let’s look at another. This time, we’ll make a function to display the map.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">someone</span> <span class="o">=</span> <span class="n">lprs</span><span class="p">[</span><span class="n">lprs</span><span class="p">[</span><span class="s1">&#39;Plate&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;6UZA652&#39;</span><span class="p">]</span>
<span class="n">oak_map</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">OAK_PD_COORDS</span><span class="p">,</span>
                     <span class="n">tiles</span><span class="o">=</span><span class="s1">&#39;OpenStreetMap&#39;</span><span class="p">,</span>
                     <span class="n">zoom_start</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">someone</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
        <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;Latitude&#39;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Longitude&#39;</span><span class="p">]],</span>
        <span class="n">popup</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;Timestamp&#39;</span><span class="p">],</span>
        <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;Color&#39;</span><span class="p">],</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;car&#39;</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;fa&#39;</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">oak_map</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>What can we learn from this map?  First, it’s pretty easy to guess where this person lives: 16th and International, or pretty near there.  And then we can see them spending some nights and a weekend near Laney College.  Did they have an apartment there briefly?  A relationship with someone who lived there?</p>
</div>
<div class="section" id="so-who-should-see-these-data">
<h2>So … who should see these data?<a class="headerlink" href="#so-who-should-see-these-data" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Who should have access to these data?</p></li>
<li><p>Is there anything we can do to make these data less dangerous in terms of
privacy, while maintaining their use for monitoring police surveillance?</p></li>
</ul>
</div>
<div class="section" id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://www.eff.org/deeplinks/2015/01/what-we-learned-oakland-raw-alpr-data">Electronic Frontier Foundation
discussion</a></p></li>
<li><p><a class="reference external" href="https://www.eastbaytimes.com/2021/09/04/oakland-police-give-fbi-unfettered-access-to-license-plate-reader-data-according-to-lawsuit">https://www.eastbaytimes.com/2021/09/04/oakland-police-give-fbi-unfettered-access-to-license-plate-reader-data-according-to-lawsuit</a></p></li>
<li><p><a class="reference external" href="https://oaklandside.org/2021/02/08/oaklands-privacy-commission-wants-police-license-plate-surveillance-canceled/">https://oaklandside.org/2021/02/08/oaklands-privacy-commission-wants-police-license-plate-surveillance-canceled/</a></p></li>
<li><p><a class="reference external" href="https://arstechnica.com/tech-policy/2015/03/we-know-where-youve-been-ars-acquires-4-6m-license-plate-scans-from-the-cops">https://arstechnica.com/tech-policy/2015/03/we-know-where-youve-been-ars-acquires-4-6m-license-plate-scans-from-the-cops</a></p></li>
<li><p><a class="reference external" href="https://www.nbcsandiego.com/news/local/license-plate-surveillance-prompts-new-concerns-about-your-privacy/48722/">https://www.nbcsandiego.com/news/local/license-plate-surveillance-prompts-new-concerns-about-your-privacy/48722/</a></p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./oakland-plates"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="clean_plates.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Cleaning the automatic license plate reader data</p>
        </div>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Matthew Brett<br/>
  
      &copy; Copyright 2021.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>